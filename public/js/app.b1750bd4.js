(function(){"use strict";var t={1574:function(t,e,o){var s=o(144),a=o(998),r=function(){var t=this,e=t._self._c;return e(a.Z,[e("Header"),e("router-view"),e("Footer")],1)},i=[],l=o(266),n=o(8271),c=function(){var t=this,e=t._self._c;return e("div",{staticClass:"footer mt-16"},[e(n.Z,{attrs:{app:"",color:"black ",padless:""}},[e(l.Z,{staticClass:"text-center white--text",attrs:{cols:"12"}},[e("strong",[t._v("Biblioteca SENA San Gil - ")]),t._v(" "+t._s((new Date).getFullYear())+" ")])],1)],1)},d=[],u={name:"PageFooter",data(){return{}}},h=u,m=o(1001),p=(0,m.Z)(h,c,d,!1,null,null,null),g=p.exports,v=o(6232),Z=o(5550),f=o(3423),b=o(4562),x=o(4324),k=o(5495),_=o(5808),C=o(4525),y=o(4611),$=o(8627),I=o(9709),A=o(3687),w=o(7953),R=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mt-1 mb-5"},[e(v.Z,{attrs:{app:"",flex:"",color:"black",dark:""}},[""!==t.$store.state.token?e(Z.Z,{on:{click:function(e){t.drawer=!0}}}):t._e(),e(w.qW,[t._v("Prestamo Bibliotecario")]),e(A.Z),""!==t.$store.state.token?e(b.Z,{staticClass:"orange black--text",on:{click:function(e){return t.salir()}}},[t._v(" salir "),e(x.Z,[t._v("mdi-door-open")])],1):t._e()],1),e(I.Z,{attrs:{temporary:"",absolute:"",color:"black"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[e(_.Z,[e(C.Z,[e("h1")]),e(C.Z,{staticClass:"d-flex justify-center",attrs:{to:"/perfil"}},[e(f.Z,{attrs:{color:"white",size:"62"}},[e(k.Z,{attrs:{src:t.$store.state.foto}})],1)],1),e(C.Z,{staticClass:"d-flex justify-center white--text mt-4 mb-4"},[e("h3",{attrs:{align:"center",justify:"center"}},[t._v(t._s(t.$store.state.datos.name))])]),e(C.Z,{attrs:{to:"/inicio"}},[e(y.Z,{staticClass:"white--text"},[e(x.Z,{attrs:{color:"white"}},[t._v("mdi-home")])],1),e($.V9,{staticClass:"white--text"},[t._v("Home")])],1),"ADMIN"===t.$store.state.datos.rol?e(C.Z,{attrs:{to:"/persona"}},[e(y.Z,{staticClass:"white--text"},[e(x.Z,{attrs:{color:"white"}},[t._v("mdi-account")])],1),e($.V9,{staticClass:"white--text"},[t._v("Usuarios")])],1):t._e(),"GUARDA"==t.$store.state.datos.rol||"BIBLIOTECARIA"==t.$store.state.datos.rol||"ADMIN"==t.$store.state.datos.rol?e(C.Z,{attrs:{to:"/usuarioregistro"}},[e(y.Z,{staticClass:"white--text"},[e(x.Z,{attrs:{color:"white"}},[t._v("mdi-account")])],1),e($.V9,{staticClass:"white--text"},[t._v("Agregar movimiento")])],1):t._e(),"ADMIN"===t.$store.state.datos.rol?e(C.Z,{attrs:{to:"/equipo"}},[e(y.Z,{staticClass:"white--text"},[e(x.Z,{attrs:{color:"white"}},[t._v("mdi-monitor")])],1),e($.V9,{staticClass:"white--text"},[t._v("Computadoras")])],1):t._e(),"ADMIN"===t.$store.state.datos.rol?e(C.Z,{attrs:{to:"/registro"}},[e(y.Z,{staticClass:"white--text"},[e(x.Z,{attrs:{color:"white"}},[t._v("mdi-book-open-page-variant")])],1),e($.V9,{staticClass:"white--text"},[t._v("Registros de E/S")])],1):t._e(),"APRENDIZ"===t.$store.state.datos.rol?e(C.Z,{attrs:{to:"/misregistros"}},[e(y.Z,{staticClass:"white--text"},[e(x.Z,{attrs:{color:"white"}},[t._v("mdi-book-open-page-variant")])],1),e($.V9,{staticClass:"white--text"},[t._v("Mis prestamos")])],1):t._e(),e(C.Z,{attrs:{to:"/miequipo"}},[e(y.Z,{staticClass:"white--text"},[e(x.Z,{attrs:{color:"white"}},[t._v("mdi-laptop")])],1),e($.V9,{staticClass:"white--text"},[t._v("Mis equipos")])],1)],1)],1)],1)},E=[],B={name:"PageHeader",data(){return{drawer:!1,group:null,rol:this.$store.state.datos.rol}},methods:{salir(){this.$router.replace("/"),this.$store.commit("setToken",""),this.$store.commit("setDatos",{}),this.$store.commit("setFoto",""),this.$store.commit("setLugar",""),this.imagen=""}},computed:{}},D=B,S=(0,m.Z)(D,R,E,!1,null,null,null),P=S.exports,T={name:"App",components:{Footer:g,Header:P},data:()=>({})},L=T,O=(0,m.Z)(L,r,i,!1,null,null,null),N=O.exports,j=o(707),M=o.n(j);s["default"].use(M());var z=new(M())({icons:{iconfont:"mdi"}}),q=o(3982),U=o.n(q),G=o(8345),H=o(9582),V=o(4886),F=o(2118),Q=o(3863),W=o(4061),Y=o(2933),J=o(3305),K=o(1713),X=o(9370),tt=o(7808),et=o(6313),ot=function(){var t=this,e=t._self._c;return e(a.Z,{staticClass:"mt-16"},[[e(F.Z,{staticClass:"mt-5",attrs:{fluid:""}},[e(K.Z,[e(l.Z,{attrs:{cols:"6"}},[e(H.Z,{staticClass:"elevation-0"},[e("h2",[t._v("Holders")])])],1),e(l.Z,{attrs:{cols:"6"}},[e(H.Z,{staticClass:"elevation-0 d-flex justify-end"},[e(b.Z,{on:{click:function(e){return t.nuevoHolder()}}},[t._v("Nuevo Usuario")])],1)],1)],1)],1),e(Q.Z,{staticClass:"elevation-1 mt-5 mx-5",attrs:{headers:t.encabezados,items:t.holders,"items-per-page":20},scopedSlots:t._u([{key:"item.opciones",fn:function({item:o}){return["1"===o.state?[e(x.Z,{staticClass:"mr-2",attrs:{color:"red"},on:{click:function(e){return t.editar(o)}}},[t._v(" mdi-account-off")])]:[e(x.Z,{staticClass:"mr-2",attrs:{color:"green"},on:{click:function(e){return t.editar(o)}}},[t._v("mdi-account-check")])],[e(x.Z,{staticClass:"mr-2",attrs:{color:"orange"},on:{click:function(e){return t.abrir(o)}}},[t._v(" mdi-pencil")])]]}},{key:"item.state",fn:function({item:o}){return["1"===o.state?e("span",{staticClass:"green--text"},[t._v("Activo")]):e("span",{staticClass:"red--text"},[t._v("Inactivo")])]}}],null,!0)})],e(W.Z,{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(et.Z,{attrs:{dark:"",color:"orange"}},[e(b.Z,{attrs:{icon:"",dark:""},on:{click:function(e){return t.cerrarDialog()}}},[e(x.Z,[t._v("mdi-close")])],1),e(w.qW,[t._v(t._s(t.titulo))])],1),e(H.Z,[e(V.ZB,[e(F.Z,[e(K.Z,[e(l.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(tt.Z,{attrs:{label:"Documento",type:"number"},model:{value:t.documento,callback:function(e){t.documento=e},expression:"documento"}})],1),e(l.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(tt.Z,{attrs:{label:"Ficha",type:"number"},model:{value:t.ficha,callback:function(e){t.ficha=e},expression:"ficha"}})],1),e(l.Z,{attrs:{cols:"12"}},[e(tt.Z,{attrs:{label:"Nombre Completo"},model:{value:t.nombre,callback:function(e){t.nombre=e},expression:"nombre"}})],1),e(l.Z,{attrs:{cols:"12"}},[e(tt.Z,{attrs:{label:"Telefono"},model:{value:t.telefono,callback:function(e){t.telefono=e},expression:"telefono"}})],1),e(l.Z,{attrs:{cols:"12"}},[e(tt.Z,{attrs:{label:"Correo"},model:{value:t.correo,callback:function(e){t.correo=e},expression:"correo"}})],1),1!=t.bd?e(l.Z,{attrs:{cols:"12"}},[e(tt.Z,{attrs:{label:"Password"},model:{value:t.pass,callback:function(e){t.pass=e},expression:"pass"}})],1):t._e(),e(l.Z,{attrs:{cols:"12",sm:"6"}},[e(X.Z,{attrs:{items:["ADMIN","PUBLICO","APRENDIZ","INSTRUCTOR","ADMINISTRATIVO","BIBLIOTECA","BIBLIOTECARIA","PORTERIA","GUARDA"],label:"Perfil"},model:{value:t.perfil,callback:function(e){t.perfil=e},expression:"perfil"}})],1)],1)],1)],1),e(V.h7,[e(A.Z),e(b.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.cerrarDialog()}}},[t._v(" Cerrar ")]),e(b.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.accionHolder()}}},[t._v(" Guardar ")])],1)],1)],1),e(Y.Z,{attrs:{value:t.overlay}},[e(J.Z,{attrs:{indeterminate:"",size:"64"}})],1)],2)},st=[],at=o(9669),rt=o.n(at),it=o(6455),lt=o.n(it),nt={name:"PagePersona",data(){return{dialog:!1,overlay:!1,titulo:"Guardar Holder",id:"",bd:!1,nombre:"",pass:"",documento:"",telefono:"",correo:"",perfil:"",ficha:"",encabezados:[{text:"Documento",align:"start",sortable:!1,value:"document"},{text:"Nombre",value:"name"},{text:"Telefono",value:"phone"},{text:"Correo",value:"email"},{text:"Ficha",value:"ficha",sortable:!1},{text:"Rol",value:"rol",sortable:!1},{text:"Estado",value:"state",sortable:!1},{text:"Opciones",value:"opciones",sortable:!1}],holders:[]}},methods:{listarHolders(){let t={headers:{"x-token":this.$store.state.token}};rt().get("/api/holder",t).then((t=>{console.log(t),this.holders=t.data.holder})).catch((t=>{console.log(t)}))},nuevoHolder(){this.dialog=!0,this.bd=!1,this.titulo="Guardar Holder"},accionHolder(){!0===this.bd?(console.log("estoy editando.."),this.editarHolder()):(console.log("estoy agregando.."),this.agregarHolder())},limpiarCajas(){this.id="",this.nombre="",this.documento="",this.telefono="",this.correo="",this.pass="",this.perfil="",this.ficha=""},abrir(t){console.log(t),this.titulo="Editar Holder",this.bd=!0,this.dialog=!0,this.id=t._id,console.log(this.id),this.nombre=t.name,this.documento=t.document,this.telefono=t.phone,this.correo=t.email,this.perfil=t.rol,this.ficha=t.ficha},editarHolder(){this.overlay=!0;let t={headers:{"x-token":this.$store.state.token}};console.log(this.documento),rt().put(`/api/holder/${this.id}`,{document:this.documento,name:this.nombre,ficha:this.ficha,phone:this.telefono,rol:this.perfil},t).then((t=>{console.log(t),lt().fire({position:"bottom-end",icon:"success",title:"Actualización exitosa",showConfirmButton:!1,timer:2e3}),this.listarHolders(),this.limpiarCajas(),this.dialog=!1,this.overlay=!1})).catch((t=>{console.log(t),lt().fire({title:"<strong>Actualización rechazada</strong>",icon:"error",html:`<h4>${t.response.data.errors[0].msg}</h4>`,showCloseButton:!0}),this.overlay=!1}))},agregarHolder(){this.overlay=!0,rt().post("/api/holder",{document:this.documento,name:this.nombre,email:this.correo,password:this.pass,phone:this.telefono,ficha:this.ficha,rol:this.perfil}).then((t=>{console.log(t),lt().fire({position:"bottom-end",icon:"success",title:"Registro exitoso",showConfirmButton:!1,timer:2e3}),this.overlay=!1,this.listarHolders(),this.limpiarCajas()})).catch((t=>{console.log(t),lt().fire({title:"<strong>Error en registro</strong>",icon:"error",html:`<h4>${t.response.data.errors[0].msg}</h4>`,showCloseButton:!0}),this.overlay=!1}))},cerrarDialog(){this.dialog=!1,this.limpiarCajas()},editar(t){if(console.log(t.state),"1"===t.state){let e={headers:{"x-token":this.$store.state.token}};rt().put(`/api/holder/unactivate/${t._id}`,{},e).then((t=>{console.log(t),this.listarHolders()})).catch((t=>{console.log(t.response)}))}else{let e={headers:{"x-token":this.$store.state.token}};rt().put(`/api/holder/activate/${t._id}`,{},e).then((t=>{console.log(t),this.listarHolders()})).catch((t=>{console.log(t.response)}))}}},mounted(){this.listarHolders()}},ct=nt,dt=(0,m.Z)(ct,ot,st,!1,null,null,null),ut=dt.exports,ht=o(7359),mt=o(6072),pt=o(2082),gt=function(){var t=this,e=t._self._c;return e(a.Z,{staticClass:"mt-16"},[""!==t.$store.state.token?[e(F.Z,{staticClass:"mt-5",attrs:{fluid:""}},[e(K.Z,[e(l.Z,{attrs:{cols:"6"}},[e(H.Z,{staticClass:"elevation-0"},[e("h2",[t._v("Computadoras")])])],1),e(l.Z,{attrs:{cols:"6"}},[e(H.Z,{staticClass:"elevation-0 d-flex justify-end"},[e(b.Z,{on:{click:function(e){return t.nuevoEquipo()}}},[t._v("Nuevo Equipo")])],1)],1)],1)],1),e(Q.Z,{staticClass:"elevation-1 mt-5 mx-5",attrs:{headers:t.encabezados,items:t.laptops,"items-per-page":20},scopedSlots:t._u([{key:"item.opciones",fn:function({item:o}){return["1"===o.state?[e(x.Z,{staticClass:"mr-2",attrs:{color:"red"},on:{click:function(e){return t.habilitar(o)}}},[t._v(" mdi-account-off")])]:[e(x.Z,{staticClass:"mr-2",attrs:{color:"green"},on:{click:function(e){return t.habilitar(o)}}},[t._v("mdi-account-check")])],e(pt.Z,{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(x.Z,t._g(t._b({staticClass:"mr-2",attrs:{dark:"",color:"green"},on:{click:function(e){return t.generarcodigo(o)}}},"v-icon",a,!1),s),[t._v("mdi-barcode")])]}}],null,!0)},[e("span",[t._v("Generar Codigo")])])]}},{key:"item.state",fn:function({item:o}){return["1"===o.state?e("span",{staticClass:"green--text"},[t._v("Activo")]):e("span",{staticClass:"red--text"},[t._v("Inactivo")])]}},{key:"item.createdAt",fn:function({item:o}){return[e("span",[t._v(t._s(o.createdAt.substring(0,10))+" "+t._s(o.createdAt.substring(11,19)))])]}}],null,!0)})]:e(F.Z,[e(K.Z,[e(l.Z),e(l.Z,{staticClass:"d-flex justify-center"},[e(k.Z,{attrs:{src:o(6315),height:"250",width:"250"}})],1),e(l.Z)],1),e(K.Z,[e(l.Z,[e(ht.Z,{attrs:{outlined:"",text:"",type:"error"}},[e(K.Z,{attrs:{align:"center"}},[e(l.Z,{staticClass:"grow"},[t._v(" En el momento su sesion ha caducado ❗ Por favor inicie sesion para interactuar con los servicios de biblioteca ")]),e(l.Z,{staticClass:"shrink"},[e(b.Z,{attrs:{outlined:"",color:"red"},on:{click:function(e){return t.login()}}},[e(x.Z,{attrs:{left:""}},[t._v(" mdi-login ")]),t._v(" Login ")],1)],1)],1)],1)],1)],1)],1),e(W.Z,{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(H.Z,[e(V.EB,[e("span",{staticClass:"text-h5"},[t._v("Guardar Perfil")])]),e(V.ZB,[e(F.Z,[e(K.Z,[e(l.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(tt.Z,{attrs:{label:"Persona Encargada",type:"text",disabled:""},model:{value:t.$store.state.datos.name,callback:function(e){t.$set(t.$store.state.datos,"name",e)},expression:"$store.state.datos.name"}})],1),e(l.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(tt.Z,{attrs:{label:"Serial",type:"text"},model:{value:t.serial,callback:function(e){t.serial=e},expression:"serial"}})],1),e(l.Z,{attrs:{cols:"12"}},[e(tt.Z,{attrs:{label:"Estado",disabled:""},model:{value:t.estado,callback:function(e){t.estado=e},expression:"estado"}})],1),e(l.Z,{attrs:{cols:"12"}},[e(mt.Z,{attrs:{label:"Observaciones"},model:{value:t.observaciones,callback:function(e){t.observaciones=e},expression:"observaciones"}})],1)],1)],1)],1),e(V.h7,[e(A.Z),e(b.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.cerrarDialog()}}},[t._v(" Cerrar ")]),e(b.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.registrar_laptop()}}},[t._v(" Guardar ")])],1)],1)],1),e(W.Z,{attrs:{"max-width":"600"},model:{value:t.dialog2,callback:function(e){t.dialog2=e},expression:"dialog2"}},[e("div",{staticClass:"d-flex justify-center white"},[e(H.Z,{attrs:{elevation:"0"}},[e(V.EB,{staticClass:"d-flex justify-center white"},[e("span",{staticClass:"d-flex justify-center",attrs:{color:"green"}},[t._v("Codigo Generado ✅")])]),e("div",{attrs:{id:"s"}}),e("br")],1)],1)]),e(Y.Z,{attrs:{value:t.overlay,absolute:"true"}},[e(J.Z,{attrs:{indeterminate:"",size:"64"}})],1)],2)},vt=[],Zt={name:"PageEquipo",data(){return{overlay:!1,dialog:!1,dialog2:!1,id:"",persona:"",estado:"Activo",serial:"",observaciones:"",encabezados:[{text:"Persona encargada",align:"start",sortable:!1,value:"holder.name"},{text:"Serial",value:"serial"},{text:"Estado",value:"state"},{text:"Creado",value:"createdAt",sortable:!1},{text:"Observaciones",value:"observations",sortable:!1},{text:"Opciones",value:"opciones",sortable:!1}],laptops:[]}},methods:{login(){this.$router.replace("/")},listarLaptops(){let t={headers:{"x-token":this.$store.state.token}};console.log(this.$route.params.id),this.id=this.$route.params.id;let e="/api/laptop";rt().get(e,t).then((t=>{console.log(t),this.laptops=t.data.laptop})).catch((t=>{console.log(t)})),this.id=""},nuevoEquipo(){this.dialog=!0},cerrarDialog(){this.dialog=!1},generarcodigo(t){let e={headers:{"x-token":this.$store.state.token}};console.log(e),this.dialog2=!0,rt().put(`/api/laptop/barcodehtml/${t._id}`,{},e).then((t=>{console.log(t),this.vector=t.data;let e=document.getElementById("s");e.innerHTML=this.vector})).catch((t=>{console.log(t)}))},registrar_laptop(){this.dialog=!1,this.overlay=!0;let t={headers:{"x-token":this.$store.state.token}};rt().post("/api/laptop",{holder:this.$store.state.datos._id,serial:this.serial,observations:this.observaciones},t).then((t=>{console.log(t),lt().fire({position:"bottom-end",icon:"success",title:"Registro exitoso",showConfirmButton:!1,timer:2e3}),this.listarLaptops(),this.limpiarCajas(),this.overlay=!1})).catch((t=>{console.log(t),lt().fire({title:"<strong>Error en registro</strong>",icon:"error",html:`<h4>${t.response.data.errors[0].msg}</h4>`,showCloseButton:!0}),this.overlay=!1}))},limpiarCajas(){this.serial="",this.estado="",this.observaciones=""},habilitar(t){if(console.log(t.state),"1"===t.state){let e={headers:{"x-token":this.$store.state.token}};rt().put(`/api/laptop/unactivate/${t._id}`,{},e).then((t=>{console.log(t),this.listarLaptops()})).catch((t=>{console.log(t.response)}))}else{let e={headers:{"x-token":this.$store.state.token}};rt().put(`/api/laptop/activate/${t._id}`,{},e).then((t=>{console.log(t),this.listarLaptops()})).catch((t=>{console.log(t.response)}))}}},mounted(){this.listarLaptops()}},ft=Zt,bt=(0,m.Z)(ft,gt,vt,!1,null,null,null),xt=bt.exports,kt=function(){var t=this,e=t._self._c;return e(a.Z,{staticClass:"mt-16"},[""!==t.$store.state.token?[e(F.Z,{staticClass:"mt-5",attrs:{fluid:""}},[e(K.Z,[e(l.Z,{attrs:{cols:"6"}},[e(H.Z,{staticClass:"elevation-0"},[e("h2",[t._v("Registro de entradas y salidas")])])],1),e(l.Z,{attrs:{cols:"6"}},["ADMIN"===t.$store.state.datos.rol||"BIBLIOTECA"===t.$store.state.datos.rol||"GUARDA"===t.$store.state.datos.rol?e(H.Z,{staticClass:"elevation-0 d-flex justify-end"},[e(b.Z,{on:{click:function(e){return t.nuevoEquipo()}}},[t._v("Nuevo Registro")])],1):t._e()],1)],1)],1),e(Q.Z,{staticClass:"elevation-1 mt-5 mx-5",attrs:{headers:t.encabezados,items:t.entradas,"items-per-page":20},scopedSlots:t._u([{key:"item.opciones",fn:function({item:o}){return[e(pt.Z,{attrs:{top:""},scopedSlots:t._u(["No se ha devuelto el pc"===t.fechaSalida(o.checkout)&&"ADMIN"===t.$store.state.datos.rol||"BIBLIOTECA"===t.$store.state.datos.rol||"BIBLIOTECARIA"===t.$store.state.datos.rol||"PORTERIA"===t.$store.state.datos.rol||"GUARDA"===t.$store.state.datos.rol?{key:"activator",fn:function({on:s,attrs:a}){return[e(x.Z,t._g(t._b({staticClass:"mr-2",attrs:{color:"orange"},on:{click:function(e){return t.devolver(o)}}},"v-icon",a,!1),s),[t._v(" mdi-keyboard-return")])]}}:null],null,!0)},[e("span",[t._v("Retorno del pc")])])]}},{key:"item.entrytime",fn:function({item:o}){return[e("span",[t._v(t._s(t.fechaEntrada(o.entrytime)))])]}},{key:"item.checkout",fn:function({item:o}){return["No se ha devuelto el pc"===t.fechaSalida(o.checkout)?e("span",{staticClass:"red--text"},[t._v(t._s(t.fechaSalida(o.checkout)))]):e("span",{staticClass:"green--text"},[t._v(t._s(t.fechaSalida(o.checkout)))])]}}],null,!0)})]:e(F.Z,[e(K.Z,[e(l.Z),e(l.Z,{staticClass:"d-flex justify-center"},[e(k.Z,{attrs:{src:o(6315),height:"250",width:"250"}})],1),e(l.Z)],1),e(K.Z,[e(l.Z,[e(ht.Z,{attrs:{outlined:"",text:"",type:"error"}},[e(K.Z,{attrs:{align:"center"}},[e(l.Z,{staticClass:"grow"},[t._v(" En el momento su sesion ha caducado ❗ Por favor inicie sesion para interactuar con los servicios de biblioteca ")]),e(l.Z,{staticClass:"shrink"},[e(b.Z,{attrs:{outlined:"",color:"red"},on:{click:function(e){return t.login()}}},[e(x.Z,{attrs:{left:""}},[t._v(" mdi-login ")]),t._v(" Login ")],1)],1)],1)],1)],1)],1)],1),e(W.Z,{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(H.Z,[e(V.EB,[e("span",{staticClass:"text-h5"},[t._v("Registrar nueva entrada")])]),e(V.ZB,[e(F.Z,[e(K.Z,[e(l.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(tt.Z,{attrs:{label:"Quien registra",type:"text",disabled:""},model:{value:t.$store.state.datos.name,callback:function(e){t.$set(t.$store.state.datos,"name",e)},expression:"$store.state.datos.name"}})],1),e(l.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(tt.Z,{attrs:{label:"Serial del pc",type:"text"},model:{value:t.serial,callback:function(e){t.serial=e},expression:"serial"}})],1)],1),e(K.Z,[e(l.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(tt.Z,{attrs:{label:"Documento del aprendiz",type:"text"},model:{value:t.documento,callback:function(e){t.documento=e},expression:"documento"}})],1),e(l.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(tt.Z,{attrs:{label:"Lugar",type:"text"},model:{value:t.lugar,callback:function(e){t.lugar=e},expression:"lugar"}})],1)],1)],1)],1),e(V.h7,[e(A.Z),e(b.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.cerrarDialog()}}},[t._v(" Cerrar ")]),e(b.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.registrar_entrada()}}},[t._v(" Guardar ")])],1)],1)],1),e(Y.Z,{attrs:{value:t.overlay}},[e(J.Z,{attrs:{indeterminate:"",size:"64"}})],1)],2)},_t=[],Ct={name:"PageRegistro",data(){return{overlay:!1,fecha:"",dialog:!1,serial:"",documento:"",lugar:"",entradas:[],span:!1,id_propietario:"",encabezados:[{text:"Rol",value:"holder.rol"},{text:"Persona encargada",align:"start",sortable:!1,value:"holder.name"},{text:"Serial PC",value:"laptop.serial"},{text:"Propietario",value:"laptop.holder.name"},{text:"Registro Inicial",value:"entrytime",sortable:!1},{text:"Aprendiz",value:"documentlearner.name",sortable:!1},{text:"Registro final",value:"checkout",sortable:!1},{text:"Opciones",value:"opciones",sortable:!1}]}},methods:{registrar_entrada(){let t={headers:{"x-token":this.$store.state.token}};rt().post("https://localhost:8080/api/entry",{holder:this.$store.state.datos._id,laptop:this.serial,documentlearner:this.documento,checkout:"",lugar:""},t).then((t=>{console.log(t),lt().fire({position:"bottom-end",icon:"success",title:"Registro exitoso",showConfirmButton:!1,timer:2e3}),this.limpiarCajas(),this.listarEntradas()})).catch((t=>{console.log(t),lt().fire({title:"<strong>Error en registro</strong>",icon:"error",html:`<h4>${t.response.data.errors[0].msg}</h4>`,showCloseButton:!0})}))},limpiarCajas(){this.serial="",this.documento=""},devolver(t){console.log(t);let e={headers:{"x-token":this.$store.state.token}};rt().put(`/api/entry/${t._id}`,{},e).then((t=>{console.log(t),this.listarEntradas()})).catch((t=>{console.log(t)}))},listarEntradas(){let t={headers:{"x-token":this.$store.state.token}};rt().get("/api/entry",t).then((t=>{console.log(t),this.entradas=t.data.entry,this.fecha=t.data.entry.entrytime})).catch((t=>{console.log(t)}))},login(){this.$router.replace("/")},nuevoEquipo(){this.dialog=!0},cerrarDialog(){this.dialog=!1},fechaEntrada(t){let e=new Date(t);return e.toLocaleDateString()+" - "+e.toLocaleTimeString()},fechaSalida(t){if(void 0===t||""===t)return this.span=!1,"No se ha devuelto el pc";{let e=new Date(t);return this.span=!0,e.toLocaleDateString()+" - "+e.toLocaleTimeString()}}},computed:{},created(){this.listarEntradas()}},yt=Ct,$t=(0,m.Z)(yt,kt,_t,!1,null,null,null),It=$t.exports,At=function(){var t=this,e=t._self._c;return e(a.Z,{staticClass:"mt-16"},[""!==t.$store.state.token?[e(F.Z,{staticClass:"mt-5",attrs:{fluid:""}},[e(K.Z,[e(l.Z,{attrs:{cols:"6"}},[e(H.Z,{staticClass:"elevation-0"},[e("h2",[t._v("Mis entradas y salidas")])])],1),e(l.Z,{attrs:{cols:"6"}})],1)],1),e(Q.Z,{staticClass:"elevation-1 mt-5 mx-5",attrs:{headers:t.encabezados,items:t.entradas,"items-per-page":20},scopedSlots:t._u([{key:"item.opciones",fn:function({item:o}){return[e(pt.Z,{attrs:{top:""},scopedSlots:t._u(["No se ha devuelto el pc"===t.fechaSalida(o.checkout)&&"ADMIN"===t.$store.state.datos.rol||"BIBLIOTECA"===t.$store.state.datos.rol||"BIBLIOTECARIA"===t.$store.state.datos.rol||"PORTERIA"===t.$store.state.datos.rol||"GUARDA"===t.$store.state.datos.rol?{key:"activator",fn:function({on:s,attrs:a}){return[e(x.Z,t._g(t._b({staticClass:"mr-2",attrs:{color:"orange"},on:{click:function(e){return t.devolver(o)}}},"v-icon",a,!1),s),[t._v(" mdi-keyboard-return")])]}}:null],null,!0)},[e("span",[t._v("Retorno del pc")])])]}},{key:"item.entrytime",fn:function({item:o}){return[e("span",[t._v(t._s(t.fechaEntrada(o.entrytime)))])]}},{key:"item.checkout",fn:function({item:o}){return["No se ha devuelto el pc"===t.fechaSalida(o.checkout)?e("span",{staticClass:"red--text"},[t._v(t._s(t.fechaSalida(o.checkout)))]):e("span",{staticClass:"green--text"},[t._v(t._s(t.fechaSalida(o.checkout)))])]}}],null,!0)})]:e(F.Z,[e(K.Z,[e(l.Z),e(l.Z,{staticClass:"d-flex justify-center"},[e(k.Z,{attrs:{src:o(6315),height:"250",width:"250"}})],1),e(l.Z)],1),e(K.Z,[e(l.Z,[e(ht.Z,{attrs:{outlined:"",text:"",type:"error"}},[e(K.Z,{attrs:{align:"center"}},[e(l.Z,{staticClass:"grow"},[t._v(" En el momento su sesion ha caducado ❗ Por favor inicie sesion para interactuar con los servicios de biblioteca ")]),e(l.Z,{staticClass:"shrink"},[e(b.Z,{attrs:{outlined:"",color:"red"},on:{click:function(e){return t.login()}}},[e(x.Z,{attrs:{left:""}},[t._v(" mdi-login ")]),t._v(" Login ")],1)],1)],1)],1)],1)],1)],1),e(W.Z,{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(H.Z,[e(V.EB,[e("span",{staticClass:"text-h5"},[t._v("Registrar nueva entrada")])]),e(V.ZB,[e(F.Z,[e(K.Z,[e(l.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(tt.Z,{attrs:{label:"Quien registra",type:"text",disabled:""},model:{value:t.$store.state.datos.name,callback:function(e){t.$set(t.$store.state.datos,"name",e)},expression:"$store.state.datos.name"}})],1),e(l.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(tt.Z,{attrs:{label:"Serial del pc",type:"text"},model:{value:t.serial,callback:function(e){t.serial=e},expression:"serial"}})],1)],1)],1)],1),e(V.h7,[e(A.Z),e(b.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.cerrarDialog()}}},[t._v(" Cerrar ")]),e(b.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.registrar_entrada()}}},[t._v(" Guardar ")])],1)],1)],1),e(Y.Z,{attrs:{value:t.overlay}},[e(J.Z,{attrs:{indeterminate:"",size:"64"}})],1)],2)},wt=[],Rt={name:"PageRegistro",data(){return{overlay:!1,fecha:"",dialog:!1,serial:"",entradas:[],span:!1,id_propietario:"",encabezados:[{text:"Rol",value:"holder.rol"},{text:"Persona encargada",align:"start",sortable:!1,value:"holder.name"},{text:"Serial PC",value:"laptop.serial"},{text:"Propietario",value:"laptop.holder.name"},{text:"Registro Inicial",value:"entrytime",sortable:!1},{text:"Aprendiz",value:"documentlearner.name",sortable:!1},{text:"Registro final",value:"checkout",sortable:!1},{text:"Opciones",value:"opciones",sortable:!1}]}},methods:{listarPrestamos(){let t={headers:{"x-token":this.$store.state.token}};rt().get(`/api/entry/historical/learner/${this.$store.state.datos._id}`,t).then((t=>{console.log(t),this.entradas=t.data.entry})).catch((t=>{console.log(t)}))},devolver(t){console.log(t);let e={headers:{"x-token":this.$store.state.token}};rt().put(`/api/entry/${t._id}`,{},e).then((t=>{console.log(t),this.listarEntradas()})).catch((t=>{console.log(t)}))},listarEntradas(){let t={headers:{"x-token":this.$store.state.token}};rt().get(`/api/entry/usuario/${this.$store.state.datos._id}`,t).then((t=>{console.log(t),this.entradas=t.data.entry,this.fecha=t.data.entry.entrytime})).catch((t=>{console.log(t)}))},login(){this.$router.replace("/")},nuevoEquipo(){this.dialog=!0},cerrarDialog(){this.dialog=!1},fechaEntrada(t){let e=new Date(t);return e.toLocaleDateString()+" - "+e.toLocaleTimeString()},fechaSalida(t){if(void 0===t||""===t)return this.span=!1,"No se ha devuelto el pc";{let e=new Date(t);return this.span=!0,e.toLocaleDateString()+" - "+e.toLocaleTimeString()}}},computed:{},created(){this.listarPrestamos()}},Et=Rt,Bt=(0,m.Z)(Et,At,wt,!1,null,null,null),Dt=Bt.exports,St=function(){var t=this,e=t._self._c;return e(a.Z,{staticClass:"mt-16"},[""!==t.$store.state.token?[e(F.Z,{staticClass:"mt-5",attrs:{fluid:""}},[e(K.Z,[e(l.Z,{attrs:{cols:"6"}},[e(H.Z,{staticClass:"elevation-0"},[e("h2",[t._v("Registro de entradas y salidas")])])],1),e(l.Z,{attrs:{cols:"6"}},["ADMIN"===t.$store.state.datos.rol||"BIBLIOTECARIA"===t.$store.state.datos.rol||"GUARDA"===t.$store.state.datos.rol?e(H.Z,{staticClass:"elevation-0 d-flex justify-end"},[e(b.Z,{on:{click:function(e){return t.nuevoEquipo()}}},[t._v("Nuevo Registro")])],1):t._e()],1)],1)],1),e(Q.Z,{staticClass:"elevation-1 mt-5 mx-5",attrs:{headers:t.encabezados,items:t.entradas,"items-per-page":20},scopedSlots:t._u([{key:"item.opciones",fn:function({item:o}){return[e(pt.Z,{attrs:{top:""},scopedSlots:t._u(["No se ha devuelto el pc"===t.fechaSalida(o.checkout)&&"ADMIN"===t.$store.state.datos.rol||"BIBLIOTECA"===t.$store.state.datos.rol||"BIBLIOTECARIA"===t.$store.state.datos.rol||"PORTERIA"===t.$store.state.datos.rol||"GUARDA"===t.$store.state.datos.rol?{key:"activator",fn:function({on:s,attrs:a}){return[e(x.Z,t._g(t._b({staticClass:"mr-2",attrs:{color:"orange"},on:{click:function(e){return t.devolver(o)}}},"v-icon",a,!1),s),[t._v(" mdi-keyboard-return")])]}}:null],null,!0)},[e("span",[t._v("Retorno del pc")])])]}},{key:"item.entrytime",fn:function({item:o}){return[e("span",[t._v(t._s(t.fechaEntrada(o.entrytime)))])]}},{key:"item.checkout",fn:function({item:o}){return["No se ha devuelto el pc"===t.fechaSalida(o.checkout)?e("span",{staticClass:"red--text"},[t._v(t._s(t.fechaSalida(o.checkout)))]):e("span",{staticClass:"green--text"},[t._v(t._s(t.fechaSalida(o.checkout)))])]}}],null,!0)},[e("template",{slot:"no-data"},[e("div",[e("span",[t._v("No hay datos por mostrar")])])])],2)]:e(F.Z,[e(K.Z,[e(l.Z),e(l.Z,{staticClass:"d-flex justify-center"},[e(k.Z,{attrs:{src:o(6315),height:"250",width:"250"}})],1),e(l.Z)],1),e(K.Z,[e(l.Z,[e(ht.Z,{attrs:{outlined:"",text:"",type:"error"}},[e(K.Z,{attrs:{align:"center"}},[e(l.Z,{staticClass:"grow"},[t._v(" En el momento su sesion ha caducado ❗ Por favor inicie sesion para interactuar con los servicios de biblioteca ")]),e(l.Z,{staticClass:"shrink"},[e(b.Z,{attrs:{outlined:"",color:"red"},on:{click:function(e){return t.login()}}},[e(x.Z,{attrs:{left:""}},[t._v(" mdi-login ")]),t._v(" Login ")],1)],1)],1)],1)],1)],1)],1),e(W.Z,{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(H.Z,[e(V.EB,[e("span",{staticClass:"text-h5"},[t._v("Registrar nueva entrada")])]),e(V.ZB,[e(F.Z,[e(K.Z,[e(l.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(tt.Z,{attrs:{label:"Quien registra",type:"text",disabled:""},model:{value:t.$store.state.datos.name,callback:function(e){t.$set(t.$store.state.datos,"name",e)},expression:"$store.state.datos.name"}})],1),e(l.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(tt.Z,{attrs:{label:"Documento del aprendiz",type:"text"},model:{value:t.documento,callback:function(e){t.documento=e},expression:"documento"}})],1)],1),e(K.Z,[e(l.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(tt.Z,{attrs:{label:"Serial del pc",type:"text"},model:{value:t.serial,callback:function(e){t.serial=e},expression:"serial"}})],1),"BIBLIOTECARIA"===t.$store.state.datos.rol?e(l.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(X.Z,{attrs:{label:"Seleccione serial...",items:t.seriales,type:"text"},model:{value:t.serial,callback:function(e){t.serial=e},expression:"serial"}})],1):t._e()],1)],1)],1),e(V.h7,[e(A.Z),e(b.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.cerrarDialog()}}},[t._v(" Cerrar ")]),e(b.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.registrar_entrada()}}},[t._v(" Guardar ")])],1)],1)],1),e(Y.Z,{attrs:{value:t.overlay}},[e(J.Z,{attrs:{indeterminate:"",size:"64"}})],1)],2)},Pt=[],Tt=(o(7658),{name:"PageRegistro",data(){return{overlay:!1,fecha:"",dialog:!1,serial:"",seriales:[],documento:"",lugar:"",entradas:[],span:!1,id_propietario:"",encabezados:[{text:"Rol",value:"holder.rol"},{text:"Persona encargada",align:"start",sortable:!1,value:"holder.name"},{text:"Serial PC",value:"laptop.serial"},{text:"Propietario",value:"laptop.holder.name"},{text:"Registro Inicial",value:"entrytime",sortable:!1},{text:"BIBLIOTECARIA"===this.$store.state.datos.rol?"Aprendiz":"",value:"documentlearner.name",sortable:!1},{text:"Registro final",value:"checkout",sortable:!1},{text:"Opciones",value:"opciones",sortable:!1}]}},methods:{listarPrestamos(){let t={headers:{"x-token":this.$store.state.token}};rt().get(`/api/entry/historical/holder/${this.$store.state.datos._id}`,t).then((t=>{console.log(t),this.entradas=t.data.entry})).catch((t=>{console.log(t)}))},limpiarCajas(){this.serial="",this.documento=""},listarSeriales(){let t={headers:{"x-token":this.$store.state.token}};rt().get(`/api/laptop/holder/${this.$store.state.lugar}`,t).then((t=>{console.log(t),t.data.laptop.forEach((t=>{this.seriales.push(t.serial)}))})).catch((t=>{console.log(t)}))},registrar_entrada(){console.log(this.$store.state.lugar);let t={headers:{"x-token":this.$store.state.token}};rt().post("/api/entry",{holder:this.$store.state.datos._id,laptop:this.serial,documentlearner:this.documento,checkout:"",place:this.$store.state.lugar},t).then((t=>{console.log(t),lt().fire({position:"bottom-end",icon:"success",title:"Registro exitoso",showConfirmButton:!1,timer:2e3}),this.limpiarCajas(),this.listarPrestamos()})).catch((t=>{console.log(t),lt().fire({title:"<strong>Error en registro</strong>",icon:"error",html:`<h4>${t.response.data.errors[0].msg}</h4>`,showCloseButton:!0})}))},devolver(t){console.log(t);let e={headers:{"x-token":this.$store.state.token}};rt().put(`/api/entry/${t._id}`,{},e).then((t=>{console.log(t),this.listarPrestamos()})).catch((t=>{console.log(t)}))},login(){this.$router.replace("/")},nuevoEquipo(){this.dialog=!0},cerrarDialog(){this.dialog=!1},fechaEntrada(t){let e=new Date(t);return e.toLocaleDateString()+" - "+e.toLocaleTimeString()},fechaSalida(t){if(void 0===t||""===t)return this.span=!1,"No se ha devuelto el pc";{let e=new Date(t);return this.span=!0,e.toLocaleDateString()+" - "+e.toLocaleTimeString()}}},computed:{},created(){this.listarPrestamos(),this.listarSeriales()}}),Lt=Tt,Ot=(0,m.Z)(Lt,St,Pt,!1,null,null,null),Nt=Ot.exports,jt=o(7280),Mt=o(352),zt=function(){var t=this,e=t._self._c;return e(F.Z,{staticClass:"mt-10"},[e(K.Z,{attrs:{align:"center",justify:"center"}},[e(l.Z,{attrs:{cols:"12",sm:"10"}},[e(H.Z,{staticClass:"elevation-6 mt-10"},[e(jt.Z,{model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[e(Mt.Z,{attrs:{value:1}},[e(K.Z,[e(l.Z,{attrs:{cols:"12",md:"6"}},[e(V.ZB,{staticClass:"mt-12"},[e("h4",{staticClass:"text-center"},[t._v("Inicie su sesión con su usuario")]),e("h6",{staticClass:"text-center grey--text"},[t._v(" Inicie sesión con sus credenciales "),e("br"),t._v(" Indicando su correo y respectiva contraseña ")]),e(K.Z,{attrs:{align:"center",justify:"center"}},[e(l.Z,{attrs:{cols:"12",sm:"8"}},[e(tt.Z,{staticClass:"mt-12",attrs:{label:"Email",outlined:"",dense:"",color:"black"},model:{value:t.correo,callback:function(e){t.correo=e},expression:"correo"}}),e(tt.Z,{attrs:{label:"Password",outlined:"",dense:"",color:"black",type:"password"},model:{value:t.pass,callback:function(e){t.pass=e},expression:"pass"}}),e(K.Z,[e(l.Z,{staticClass:"mb-6",attrs:{cols:"12",sm:"12"}},[e("span",{staticClass:"Subtitle 1 blue--text",on:{click:function(e){return t.recuperarClave()}}},[t._v("Olvido la contraseña?")])])],1),e(b.Z,{staticClass:"black--text",attrs:{color:"orange",dark:"",block:"",tile:""},on:{click:function(e){return t.login()}}},[t._v("Iniciar Sesion ")])],1)],1)],1)],1),e(l.Z,{staticClass:"orange rounded-bl-xl",attrs:{cols:"12",md:"6"}},[e("div",{staticStyle:{"text-align":"center",padding:"180px 0"}},[e(V.ZB,{staticClass:"black--text"},[e("h3",{staticClass:"text-center"},[t._v("No tienes aun usuario?")]),e("h6",{staticClass:"text-center"},[t._v(" Registrese para que pueda prestar equipos de computo de la Biblioteca SENA - San Gil ")])]),e("div",{staticClass:"text-center"},[e(b.Z,{staticClass:"black--text",attrs:{tile:"",outlined:"",dark:""},on:{click:function(e){t.step++}}},[t._v("Registrese")])],1)],1)])],1)],1),e(Mt.Z,{attrs:{value:2}},[e(K.Z,[e(l.Z,{staticClass:"orange rounded-br-xl",attrs:{cols:"12",md:"4"}},[e("div",{staticStyle:{"text-align":"center",padding:"180px 0"}},[e(V.ZB,{staticClass:"black--text"},[e("h3",{staticClass:"text-center"},[t._v("Ya esta registrado?")]),e("h6",{staticClass:"text-center"},[t._v(" Inicie sesión para que registre su prestamo y edite su perfil ")])]),e("div",{staticClass:"text-center"},[e(b.Z,{staticClass:"black--text",attrs:{tile:"",outlined:"",dark:""},on:{click:function(e){t.step--}}},[t._v("Iniciar Sesión")])],1)],1)]),e(l.Z,{staticClass:"mt-4",attrs:{cols:"12",md:"4"}},[e(V.ZB,{staticClass:"mt-4"},[e(K.Z,{attrs:{align:"center",justify:"center"}},[e(l.Z,{attrs:{cols:"12",align:"center",justify:"center"}},[e("h2",{staticClass:"mb-11",attrs:{justify:"center"}},[t._v(" Registre su cuenta ")]),e(tt.Z,{attrs:{label:"Nombre Completo",outlined:"",dense:"",color:"black",autocomplete:"false"},model:{value:t.nombre,callback:function(e){t.nombre=e},expression:"nombre"}}),e(tt.Z,{attrs:{label:"Documento",outlined:"",dense:"",color:"black",autocomplete:"false"},model:{value:t.documento,callback:function(e){t.documento=e},expression:"documento"}}),e(tt.Z,{attrs:{label:"Email",outlined:"",dense:"",color:"black",autocomplete:"false"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),e(tt.Z,{attrs:{label:"Password",outlined:"",dense:"",color:"black",autocomplete:"false",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1)],1)],1),e(l.Z,{staticClass:"mt-4",attrs:{cols:"12",md:"4"}},[e(V.ZB,{staticClass:"mt-4"},[e(K.Z,{attrs:{align:"center",justify:"center"}},[e(l.Z,{staticClass:"cols-12",attrs:{align:"center"}},[e(tt.Z,{attrs:{label:"Ficha",outlined:"",dense:"",color:"blue",autocomplete:"false"},model:{value:t.ficha,callback:function(e){t.ficha=e},expression:"ficha"}}),e(tt.Z,{attrs:{label:"Telefono",type:"Number",outlined:"",dense:"",color:"blue",autocomplete:"false"},model:{value:t.telefono,callback:function(e){t.telefono=e},expression:"telefono"}}),e(tt.Z,{attrs:{disabled:"",type:"text",outlined:"",dense:"",color:"blue",autocomplete:"false"},model:{value:t.estado,callback:function(e){t.estado=e},expression:"estado"}}),e(X.Z,{attrs:{items:t.roles,label:"Perfil",outlined:"",dense:""},model:{value:t.perfil,callback:function(e){t.perfil=e},expression:"perfil"}}),e(b.Z,{staticClass:"orange black--text",attrs:{block:""},on:{click:function(e){return t.registrar_usuario()}}},[t._v("Registrar")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1),e(W.Z,{attrs:{"max-width":"400px",persistent:""},model:{value:t.dialog2,callback:function(e){t.dialog2=e},expression:"dialog2"}},[e(H.Z,[e(V.EB,[t._v(" Selecione su lugar de trabajo ")]),e(V.ZB,[e(X.Z,{attrs:{items:t.lugares,label:"Lugar de trabajo...","item-value":"value"},model:{value:t.lugar,callback:function(e){t.lugar=e},expression:"lugar"}})],1),e(V.h7,[e(b.Z,{attrs:{outlined:"",color:"orange"},on:{click:function(e){return t.ingresarHome()}}},[t._v(" Ingresar ")]),e(A.Z),e(b.Z,{attrs:{color:"red",outlined:""},on:{click:function(e){return t.cerrar()}}},[t._v(" Cerrar ")])],1)],1)],1),e(W.Z,{attrs:{"max-width":"400px"},model:{value:t.dialog3,callback:function(e){t.dialog3=e},expression:"dialog3"}},[e(H.Z,[e(V.EB,{staticClass:"black white--text"},[e("span",[t._v("Introduce tu correo electrónico ")]),e("span",[t._v(" para recuperar cuenta")])]),e(V.ZB,[e(l.Z,{attrs:{cols:"12"}},[e(tt.Z,{attrs:{type:"email",label:"Correo"},model:{value:t.recuperar,callback:function(e){t.recuperar=e},expression:"recuperar"}})],1)],1),e(V.h7,[e(A.Z),e(b.Z,{staticClass:"orange",on:{click:function(e){return t.cambioClave()}}},[t._v("Enviar")])],1)],1)],1),e(Y.Z,{attrs:{value:t.overlay}},[e(J.Z,{attrs:{indeterminate:"",size:"64"}})],1)],1)},qt=[],Ut={name:"PageLogin",data(){return{step:1,lugares:[],lugar:"",l:"",dialog2:!1,dialog3:!1,overlay:!1,recuperar:"",nombre:"",password:"",documento:"",telefono:"",email:"",perfil:"",ficha:"",estado:"Activo",roles:["APRENDIZ","INSTRUCTOR","ADMINISTRATIVO","PUBLICO"],imagen:"https://us.123rf.com/450wm/apoev/apoev1903/apoev190300009/124806570-persona-hombre-de-marcador-de-posici%C3%B3n-de-foto-gris-en-camiseta-sobre-fondo-gris.jpg",valor:"",correo:"",pass:"",show1:!1,errores:""}},methods:{login(){this.overlay=!0,rt().post("/api/holder/login",{email:this.correo,password:this.pass}).then((t=>{console.log(t.data.token),console.log(t.data.holder.rol),this.$store.dispatch("setToken",t.data.token),this.$store.dispatch("setDatos",t.data.holder),this.$store.dispatch("setFoto",t.data.holder.photo),console.log(this.$store.state.datos),this.overlay=!1;let e={headers:{"x-token":this.$store.state.token}};"BIBLIOTECARIA"===t.data.holder.rol?(rt().get("/api/holder/rol/BIBLIOTECA",e).then((t=>{console.log(t.data.holder),t.data.holder.forEach((t=>{console.log(t),this.lugares.push({text:t.name,value:t._id})}))})).catch((t=>{console.log(t)})),this.dialog2=!0):"GUARDA"===t.data.holder.rol?(rt().get("/api/holder/rol/PORTERIA",e).then((t=>{console.log(t.data.holder),t.data.holder.forEach((t=>{this.lugares.push({text:t.name,value:t._id})}))})).catch((t=>{console.log(t)})),this.dialog2=!0):this.$router.push("/inicio")})).catch((t=>{console.log(t),""===this.correo||""===this.pass?(lt().fire({title:"<strong>Error en credenciales</strong>",icon:"error",html:`<h4>${t.response.data.errors[0].msg}</h4>`,showCloseButton:!0}),this.overlay=!1):(lt().fire({title:"<strong>Error en credenciales</strong>",icon:"error",html:`<h4>${t.response.data.msg}</h4>`,showCloseButton:!0}),this.overlay=!1)}))},recuperarClave(){this.dialog3=!0},cambioClave(){this.dialog3=!0,rt().post("/api/holder/requestpasswordreset",{email:this.recuperar}).then((t=>{console.log(t),lt().fire({position:"bottom-end",icon:"success",title:"Correo de recuperacion enviado",showConfirmButton:!1,timer:2e3}),this.recuperar=""})).catch((t=>{console.log(t),lt().fire({title:"<strong>Error en credenciales</strong>",icon:"error",html:`<h4>${t.response.data.msg}</h4>`,showCloseButton:!0})}))},ingresarHome(){this.login(),""===this.lugar?(lt().fire({title:"<strong>Por favor</strong>",icon:"error",html:"<h4>Seleccione un lugar de trabajo</h4>",showCloseButton:!0}),this.$store.commit("setToken",""),this.$store.commit("setDatos",{}),this.$store.commit("setFoto",""),this.$store.commit("setLugar",""),this.imagen=""):(console.log(this.lugar),this.$store.dispatch("setLugar",this.lugar),this.$router.push("/inicio"))},cerrar(){this.$store.commit("setToken",""),this.$store.commit("setDatos",{}),this.$store.commit("setFoto",""),this.$store.commit("setLugar",""),this.imagen="",this.dialog2=!1},registrar_usuario(){this.overlay=!0,console.log(this.password),rt().post("/api/holder",{document:this.documento,name:this.nombre,email:this.email,password:this.password,phone:this.telefono,ficha:this.ficha,rol:this.perfil}).then((t=>{console.log(t),lt().fire({position:"bottom-end",icon:"success",title:"Registro exitoso",showConfirmButton:!1,timer:2e3}),this.limpiarcajas(),this.overlay=!1})).catch((t=>{console.log(t),lt().fire({title:"<strong>Error en registro</strong>",icon:"error",html:`<h4>${t.response.data.errors[0].msg}</h4>`,showCloseButton:!0}),this.overlay=!1}))},limpiarcajas(){this.nombre="",this.password="",this.documento="",this.telefono="",this.email="",this.perfil="",this.ficha=""}}},Gt=Ut,Ht=(0,m.Z)(Gt,zt,qt,!1,null,"6fc46ae1",null),Vt=Ht.exports,Ft=o(7912),Qt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-10 mt-16"},[""!==t.$store.state.token?e("div",[e(F.Z,{staticClass:"orange cont d-flex justify-center",staticStyle:{height:"200px"}},[e(f.Z,{staticClass:"ava",attrs:{color:"white",size:"150"}},[e(k.Z,{attrs:{src:t.imagen},on:{click:function(e){return t.aumentar()}}})],1)],1),e(F.Z,{staticClass:"d-flex justify-center"},[e(K.Z,[e(l.Z,{attrs:{cols:"12",sm:"2"}}),e(l.Z,{staticClass:"d-flex justify-center",attrs:{cols:"12",sm:"8"}},[e(H.Z,{staticClass:"mt-5 tar black white--text",attrs:{width:"500px",rounded:"xl"}},[e(V.EB),e(V.EB,{staticClass:"d-flex justify-center mt-4"},[t._v(" "+t._s(t.nombre)+" ")]),e(_.Z,{staticClass:"d-flex justify-center"},[e(Ft.Z,[e(C.Z,[e(y.Z,[e(x.Z,[t._v("mdi-school")])],1),e($.km,[e($.V9,[t._v("Soy "+t._s(t.perfil)+" de la ficha "+t._s(t.ficha))])],1)],1),e(C.Z,[e(y.Z,[e(x.Z,[t._v(" mdi-account ")])],1),e($.km,[e($.V9,[t._v("Documento: "+t._s(t.documento))])],1)],1),e(C.Z,[e(y.Z,[e(x.Z,[t._v(" mdi-email ")])],1),e($.V9,[t._v("Correo: "+t._s(t.correo))]),e($.km)],1),e(C.Z,[e(y.Z,[e(x.Z,[t._v(" mdi-phone ")])],1),e($.km,[e($.V9,[t._v("Telefono: "+t._s(t.telefono))])],1)],1)],1)],1),e(V.h7,[e(b.Z,{staticClass:"ml-3",attrs:{color:"orange ",text:""},on:{click:function(e){return t.abrir()}}},[e(x.Z,[t._v("mdi-pencil")]),t._v(" Actualizar Perfil ")],1),e(A.Z),e(b.Z,{staticClass:"ml-3",attrs:{color:"orange ",text:""},on:{click:function(e){return t.registrar_equipo()}}},[e(x.Z,[t._v("mdi-laptop")]),e("h4",[t._v("Registrar equipo")])],1)],1)],1)],1),e(l.Z,{attrs:{cols:"12",sm:"2"}})],1)],1),e(W.Z,{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("div",{staticClass:"white",attrs:{align:"center",justify:"center"}},[e(et.Z,{attrs:{dark:"",color:"orange"}},[e(b.Z,{attrs:{icon:"",dark:""},on:{click:function(e){t.dialog=!1}}},[e(x.Z,[t._v("mdi-close")])],1),e(w.qW,[t._v("Registre sus datos")])],1),e(F.Z,[e(K.Z,[e(l.Z,{staticClass:"mt-4",attrs:{cols:"12",md:"6"}},[e(V.ZB,[e(K.Z,{attrs:{align:"center",justify:"center"}},[e(l.Z,{attrs:{cols:"12",align:"center",justify:"center"}},[e(tt.Z,{attrs:{label:"Nombre Completo",outlined:"",dense:"",color:"orange",autocomplete:"false"},model:{value:t.nombre,callback:function(e){t.nombre=e},expression:"nombre"}}),e(tt.Z,{attrs:{label:"Documento",outlined:"",dense:"",color:"orange",autocomplete:"false"},model:{value:t.documento,callback:function(e){t.documento=e},expression:"documento"}}),e(tt.Z,{attrs:{label:"Ficha",outlined:"",dense:"",color:"orange",autocomplete:"false"},model:{value:t.ficha,callback:function(e){t.ficha=e},expression:"ficha"}}),e(tt.Z,{attrs:{label:"Telefono",type:"Number",outlined:"",dense:"",color:"orange",autocomplete:"false"},model:{value:t.telefono,callback:function(e){t.telefono=e},expression:"telefono"}}),e(X.Z,{attrs:{items:"ADMIN"===t.$store.state.datos.rol?t.rolesAdmin:"BIBLIOTECA"===t.$store.state.datos.rol||"BIBLIOTECARIA"===t.$store.state.datos.rol?t.rolesBiblioteca:"PORTERIA"===t.$store.state.datos.rol||"GUARDA"===t.$store.state.datos.rol?t.rolesPorteria:t.roles,label:"Perfil",outlined:"",dense:""},model:{value:t.perfil,callback:function(e){t.perfil=e},expression:"perfil"}})],1)],1)],1)],1),e(l.Z,{attrs:{cols:"12",md:"6"}},[e(V.ZB,[e(K.Z,{attrs:{align:"center",justify:"center"}},[e(l.Z,{staticClass:"cols-12",attrs:{align:"center"}},[e(k.Z,{staticClass:"mb-8",staticStyle:{border:"5px solid"},attrs:{src:t.imagen,height:"250",width:"250"}},[""===t.imagen?e("h2",[t._v("No imagen")]):t._e()]),e("input",{attrs:{type:"file"},on:{change:t.subir}})],1)],1)],1)],1),e(b.Z,{staticClass:"orange black--text mb-6",attrs:{block:""},on:{click:function(e){return t.actualizar()}}},[t._v("Actualizar Datos")])],1)],1)],1)]),e(W.Z,{attrs:{height:"400",width:"300"},model:{value:t.dialog2,callback:function(e){t.dialog2=e},expression:"dialog2"}},[e(H.Z,{staticClass:"mx-auto",attrs:{"max-width":"344"}},[e(k.Z,{attrs:{src:t.imagen,height:"300px"}}),e(V.EB,[t._v(" "+t._s(t.nombre)+" ")]),e(V.h7,[e(A.Z),e(b.Z,{staticClass:"orange",attrs:{dense:"",elevation:"2"},on:{click:function(e){return t.salir()}}},[t._v(" Salir ")])],1)],1)],1)],1):e(F.Z,[e(K.Z,[e(l.Z),e(l.Z,{staticClass:"d-flex justify-center"},[e(k.Z,{attrs:{src:o(6315),height:"250",width:"250"}})],1),e(l.Z)],1),e(K.Z,[e(l.Z,[e(ht.Z,{attrs:{outlined:"",text:"",type:"error"}},[e(K.Z,{attrs:{align:"center"}},[e(l.Z,{staticClass:"grow"},[t._v(" En el momento su sesion ha caducado ❗ Por favor inicie sesion para interactuar con los servicios de biblioteca ")]),e(l.Z,{staticClass:"shrink"},[e(b.Z,{attrs:{outlined:"",color:"red"},on:{click:function(e){return t.login()}}},[e(x.Z,{attrs:{left:""}},[t._v(" mdi-login ")]),t._v(" Login ")],1)],1)],1)],1)],1)],1)],1),e(Y.Z,{attrs:{value:t.overlay}},[e(J.Z,{attrs:{indeterminate:"",size:"64"}})],1)],1)},Wt=[],Yt={name:"PagePerfil",data(){return{rolesAdmin:["ADMIN","PUBLICO","APRENDIZ","INSTRUCTOR","ADMINISTRATIVO","BIBLIOTECARIA","BIBLIOTECA","GUARDA","PORTERIA"],rolesBiblioteca:["PUBLICO","APRENDIZ","INSTRUCTOR","ADMINISTRATIVO","BIBLIOTECARIA","BIBLIOTECA"],rolesPorteria:["PUBLICO","APRENDIZ","INSTRUCTOR","ADMINISTRATIVO","GUARDA","PORTERIA"],roles:["PUBLICO","APRENDIZ","INSTRUCTOR","ADMINISTRATIVO"],dialog:!1,dialog2:!1,img:"",overlay:!1,nombre:this.$store.state.datos.name,perfil:this.$store.state.datos.rol,documento:this.$store.state.datos.document,ficha:this.$store.state.datos.ficha,correo:this.$store.state.datos.email,telefono:this.$store.state.datos.phone,imagen:this.$store.state.datos.photo}},methods:{login(){this.$router.replace("/")},abrir(){this.dialog=!0},aumentar(){this.dialog2=!0},salir(){this.dialog2=!1},subir(t){this.img=t.target.files[0],console.log(this.img);let e=new FormData;e.append("archivo",this.img);let o={headers:{"x-token":this.$store.state.token}};console.log(e),rt().post(`/api/holder/uploadcloud/${this.$store.state.datos._id}`,e,o).then((t=>{console.log(t.data.url),this.imagen=t.data.url,this.$store.dispatch("setFoto",t.data.url)})).catch((t=>{console.log(t)}))},registrar_equipo(){console.log(this.$store.state.datos._id),this.$router.replace("/miequipo")},actualizar(){this.overlay=!0;let t={headers:{"x-token":this.$store.state.token}};console.log(this.$store.state.datos._id),rt().put(`/api/holder/${this.$store.state.datos._id}`,{document:this.documento,name:this.nombre,ficha:this.ficha,phone:this.telefono,rol:this.perfil},t).then((t=>{console.log(t),lt().fire({position:"bottom-end",icon:"success",title:"Actualización exitosa",showConfirmButton:!1,timer:2e3}),this.dialog=!1,this.overlay=!1})).catch((t=>{console.log(t),lt().fire({title:"<strong>Actualización rechazada</strong>",icon:"error",html:`<h4>${t.response.data.errors[0].msg}</h4>`,showCloseButton:!0}),this.overlay=!1}))}},mount(){this.llenar_perfil()}},Jt=Yt,Kt=(0,m.Z)(Jt,Qt,Wt,!1,null,null,null),Xt=Kt.exports,te=o(6900),ee=function(){var t=this,e=t._self._c;return e(a.Z,{staticClass:"mt-16"},[""!==t.$store.state.token?e(F.Z,{staticClass:"mt-7"},[e(K.Z,["ADMIN"==t.$store.state.datos.rol?e(l.Z,{attrs:{cols:"12",md:"4",sm:"6"}},[e(H.Z,{staticClass:"mx-auto card1",attrs:{"max-width":"344",elevation:"24"}},[e(C.Z,{attrs:{"three-line":""}},[e($.km,[e($.V9,{staticClass:"text-h5 mb-1"},[t._v(" Usuarios ")]),e($.oZ,[t._v("Listar todos los usuarios registrados")])],1),e(te.Z,{attrs:{size:"60",color:"black"}},[e(x.Z,{attrs:{"x-large":"",color:"orange"}},[t._v("mdi-account")])],1)],1),e(V.h7,[e(b.Z,{attrs:{outlined:"",rounded:"",color:"orange",to:"/persona"}},[t._v("Todos los usuarios")])],1)],1)],1):t._e(),"GUARDA"==t.$store.state.datos.rol||"BIBLIOTECARIA"==t.$store.state.datos.rol?e(l.Z,{attrs:{cols:"12",md:"4",sm:"6"}},[e(H.Z,{staticClass:"mx-auto card1",attrs:{"max-width":"344",elevation:"24"}},[e(C.Z,{attrs:{"three-line":""}},[e($.km,[e($.V9,{staticClass:"text-h5 mb-1"},[t._v(" Equipos Pendientes ")]),e($.oZ,[t._v("Listar todos los usuarios registrados")])],1),e(te.Z,{attrs:{size:"60",color:"black"}},[e(x.Z,{attrs:{"x-large":"",color:"orange"}},[t._v("mdi-account")])],1)],1),e(V.h7,[e(b.Z,{attrs:{outlined:"",rounded:"",color:"orange",to:"/pendientes"}},[t._v("Todos los usuarios")])],1)],1)],1):t._e(),"GUARDA"==t.$store.state.datos.rol||"BIBLIOTECARIA"==t.$store.state.datos.rol||"ADMIN"==t.$store.state.datos.rol?e(l.Z,{attrs:{cols:"12",md:"4",sm:"6"}},[e(H.Z,{staticClass:"mx-auto card1",attrs:{"max-width":"344",elevation:"24"}},[e(C.Z,{attrs:{"three-line":""}},[e($.km,[e($.V9,{staticClass:"text-h5 mb-1"},[t._v(" Agregar Movimiento ")]),e($.oZ,[t._v("Agregar y listar los movimientos hechos por este usuario")])],1),e(te.Z,{attrs:{size:"60",color:"black"}},[e(x.Z,{attrs:{"x-large":"",color:"orange"}},[t._v("mdi-account")])],1)],1),e(V.h7,[e(b.Z,{attrs:{outlined:"",rounded:"",color:"orange",to:"/usuarioregistro"}},[t._v("Todos los movimientos")])],1)],1)],1):t._e(),"ADMIN"==t.$store.state.datos.rol?e(l.Z,{attrs:{cols:"12",md:"4",sm:"6"}},[e(H.Z,{staticClass:"mx-auto card2",attrs:{"max-width":"344",elevation:"24"}},[e(C.Z,{attrs:{"three-line":""}},[e($.km,[e($.V9,{staticClass:"text-h5 mb-1"},[t._v(" Computadoras ")]),e($.oZ,[t._v("Listar todas las computadoras registradas")])],1),e(te.Z,{attrs:{size:"60",color:"black"}},[e(x.Z,{attrs:{"x-large":"",color:"orange"}},[t._v("mdi-laptop")])],1)],1),e(V.h7,[e(b.Z,{attrs:{outlined:"",rounded:"",color:"orange",to:"/equipo"}},[t._v("Todas las computadoras")])],1)],1)],1):t._e(),"ADMIN"==t.$store.state.datos.rol?e(l.Z,{attrs:{cols:"12",md:"4",sm:"6"}},[e(H.Z,{staticClass:"mx-auto card3",attrs:{"max-width":"344",elevation:"24"}},[e(C.Z,{attrs:{"three-line":""}},[e($.km,[e($.V9,{staticClass:"text-h5 mb-1"},[t._v(" Registros ")]),e($.oZ,[t._v("Listado general de registros")])],1),e(te.Z,{attrs:{size:"60",color:"black"}},[e(x.Z,{attrs:{"x-large":"",color:"orange"}},[t._v("mdi-book-open-page-variant")])],1)],1),e(V.h7,[e(b.Z,{attrs:{outlined:"",rounded:"",color:"orange",to:"/registro"}},[t._v("Todos los registros")])],1)],1)],1):t._e(),"APRENDIZ"==t.$store.state.datos.rol?e(l.Z,{attrs:{cols:"12",md:"4",sm:"6"}},[e(H.Z,{staticClass:"mx-auto card3",attrs:{"max-width":"344",elevation:"24"}},[e(C.Z,{attrs:{"three-line":""}},[e($.km,[e($.V9,{staticClass:"text-h5 mb-1"},[t._v(" Mis Prestamos ")]),e($.oZ,[t._v("Historico de mis movimientos en porteria y biblioteca")])],1),e(te.Z,{attrs:{size:"60",color:"black"}},[e(x.Z,{attrs:{"x-large":"",color:"orange"}},[t._v("mdi-book-open-page-variant")])],1)],1),e(V.h7,[e(b.Z,{attrs:{outlined:"",color:"orange",rounded:"",to:"/misregistros"}},[t._v("Mis Movimientos ")])],1)],1)],1):t._e(),e(l.Z,{attrs:{cols:"12",md:"4",sm:"6"}},[e(H.Z,{staticClass:"mx-auto card3",attrs:{"max-width":"344",elevation:"24"}},[e(C.Z,{attrs:{"three-line":""}},[e($.km,[e($.V9,{staticClass:"text-h5 mb-1"},[t._v(" Mis Equipos ")]),e($.oZ,[t._v("Registra y listado de su equipos")])],1),e(te.Z,{attrs:{size:"60",color:"black"}},[e(x.Z,{attrs:{"x-large":"",color:"orange"}},[t._v("mdi-monitor")])],1)],1),e(V.h7,[e(b.Z,{attrs:{outlined:"",rounded:"",color:"orange",to:"/miequipo"}},[t._v(" Mi PC ")])],1)],1)],1),e(l.Z,{attrs:{cols:"12",md:"4",sm:"6"}},[e(H.Z,{staticClass:"mx-auto card3",attrs:{"max-width":"344",elevation:"24"}},[e(C.Z,{attrs:{"three-line":""}},[e($.km,[e($.V9,{staticClass:"text-h5 mb-1"},[t._v(" Mi Perfil ")]),e($.oZ,[t._v("Revisa y edita sus datos personales")])],1),e(te.Z,{attrs:{size:"60",color:"black"}},[e(x.Z,{attrs:{"x-large":"",color:"orange"}},[t._v("mdi-account-circle")])],1)],1),e(V.h7,[e(b.Z,{attrs:{outlined:"",rounded:"",color:"orange",to:"/perfil"}},[t._v(" Mis datos ")])],1)],1)],1)],1)],1):t._e()],1)},oe=[],se={name:"PageInicio",data(){return{rol:this.$store.state.datos.rol}},methods:{login(){this.$router.replace("/")},datos(t){console.log(t)},lugar(){console.log(this.$store.state.lugar)}},mounted(){this.lugar()},computed:{lista(){let t=[];return t=[{icon:"mdi-account-check",title:"Usuarios Activos",count:"HA",to:"/persona",rol:"ADMIN"===this.rol},{icon:"mdi-monitor",title:"Computadoras activas",count:"CA",to:"/equipo",rol:"ADMIN"===this.rol},{icon:"mdi-book-open-page-variant",title:"Registros",count:"R",to:"/registro",rol:"ADMIN"===this.rol},{icon:"mdi-laptop",title:"Mis computadoras",count:"MC",to:"/miequipo",rol:"APRENDIZ"===this.rol||"ADMIN"===this.rol||"PUBLICO"===this.rol||"INSTRUCTOR"===this.rol||"ADMINISTRATIVO"===this.rol||"GUARDA"===this.rol},{icon:"mdi-account-circle",title:"Mi perfil",count:"MP",to:"/perfil",rol:"APRENDIZ"===this.rol||"ADMIN"===this.rol||"PUBLICO"===this.rol||"INSTRUCTOR"===this.rol||"ADMINISTRATIVO"===this.rol||"GUARDA"===this.rol||"BIBLIOTECA"===this.rol}],t}}},ae=se,re=(0,m.Z)(ae,ee,oe,!1,null,null,null),ie=re.exports,le=function(){var t=this,e=t._self._c;return e(a.Z,{staticClass:"mt-16"},[""!==t.$store.state.token?[e(F.Z,{staticClass:"mt-5",attrs:{fluid:""}},[e(K.Z,[e(l.Z,{attrs:{cols:"6"}},[e(H.Z,{staticClass:"elevation-0"},[e("h2",[t._v("Computadoras")])])],1),e(l.Z,{attrs:{cols:"6"}},[e(H.Z,{staticClass:"elevation-0 d-flex justify-end"},[e(b.Z,{on:{click:function(e){return t.nuevoEquipo()}}},[t._v("Nuevo Equipo")])],1)],1)],1)],1),e(Q.Z,{staticClass:"elevation-1 mt-5 mx-5",attrs:{headers:t.encabezados,items:t.laptops,"items-per-page":20},scopedSlots:t._u([{key:"item.opciones",fn:function({item:o}){return["1"===o.state?[e(x.Z,{staticClass:"mr-2",attrs:{color:"red"},on:{click:function(e){return t.habilitar(o)}}},[t._v(" mdi-account-off")])]:[e(x.Z,{staticClass:"mr-2",attrs:{color:"green"},on:{click:function(e){return t.habilitar(o)}}},[t._v("mdi-account-check")])],e(pt.Z,{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(x.Z,t._g(t._b({staticClass:"mr-2",attrs:{dark:"",color:"green"},on:{click:function(e){return t.generarcodigo(o)}}},"v-icon",a,!1),s),[t._v("mdi-barcode")])]}}],null,!0)},[e("span",[t._v("Generar Codigo")])]),e(pt.Z,{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(x.Z,t._g(t._b({staticClass:"mr-2",attrs:{dark:"",color:"green"},on:{click:function(e){return t.editar(o)}}},"v-icon",a,!1),s),[t._v(" mdi-pencil")])]}}],null,!0)},[e("span",[t._v("Editar Laptop")])])]}},{key:"item.state",fn:function({item:o}){return["1"===o.state?e("span",{staticClass:"green--text"},[t._v("Activo")]):e("span",{staticClass:"red--text"},[t._v("Inactivo")])]}},{key:"item.createdAt",fn:function({item:o}){return[e("span",[t._v(t._s(o.createdAt.substring(0,10))+" "+t._s(o.createdAt.substring(11,19)))])]}}],null,!0)})]:t._e(),e(W.Z,{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(H.Z,[e(V.EB,[e("span",{staticClass:"text-h5"},[t._v("Guardar Perfil")])]),e(V.ZB,[e(F.Z,[e(K.Z,[e(l.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(tt.Z,{attrs:{label:"Persona Encargada",type:"text",disabled:""},model:{value:t.$store.state.datos.name,callback:function(e){t.$set(t.$store.state.datos,"name",e)},expression:"$store.state.datos.name"}})],1),e(l.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(tt.Z,{attrs:{label:"Serial",type:"text"},model:{value:t.serial,callback:function(e){t.serial=e},expression:"serial"}})],1),e(l.Z,{attrs:{cols:"12"}},[e(tt.Z,{attrs:{label:"Estado",disabled:""},model:{value:t.estado,callback:function(e){t.estado=e},expression:"estado"}})],1),e(l.Z,{attrs:{cols:"12"}},[e(mt.Z,{attrs:{label:"Observaciones (Marca, color y demas)"},model:{value:t.observaciones,callback:function(e){t.observaciones=e},expression:"observaciones"}})],1)],1)],1)],1),e(V.h7,[e(A.Z),e(b.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.cerrarDialog()}}},[t._v(" Cerrar ")]),e(b.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.registrar_laptop()}}},[t._v(" Guardar ")])],1)],1)],1),e(W.Z,{attrs:{"max-width":"600"},model:{value:t.dialog2,callback:function(e){t.dialog2=e},expression:"dialog2"}},[e("div",{staticClass:"d-flex justify-center white"},[e(H.Z,{attrs:{elevation:"0"}},[e(V.EB,{staticClass:"d-flex justify-center white"},[e("span",{staticClass:"d-flex justify-center",attrs:{color:"green"}},[t._v("Codigo Generado ✅")])]),e("div",{attrs:{id:"s"}}),e("br")],1)],1)]),""===t.$store.state.token?e(F.Z,[e(K.Z,[e(l.Z),e(l.Z,{staticClass:"d-flex justify-center"},[e(k.Z,{attrs:{src:o(6315),height:"250",width:"250"}})],1),e(l.Z)],1),e(K.Z,[e(l.Z,[e(ht.Z,{attrs:{outlined:"",text:"",type:"error"}},[e(K.Z,{attrs:{align:"center"}},[e(l.Z,{staticClass:"grow"},[t._v(" En el momento su sesion ha caducado ❗ Por favor inicie sesion para interactuar con los servicios de biblioteca ")]),e(l.Z,{staticClass:"shrink"},[e(b.Z,{attrs:{outlined:"",color:"red"},on:{click:function(e){return t.login()}}},[e(x.Z,{attrs:{left:""}},[t._v(" mdi-login ")]),t._v(" Login ")],1)],1)],1)],1)],1)],1)],1):t._e(),e(Y.Z,{attrs:{value:t.overlay}},[e(J.Z,{attrs:{indeterminate:"",size:"64"}})],1)],2)},ne=[],ce={name:"PageEquipo",data(){return{overlay:!1,dialog:!1,dialog2:!1,persona:"",estado:"Activo",serial:"",observaciones:"",encabezados:[{text:"Persona encargada",align:"start",sortable:!1,value:"holder.name"},{text:"Serial",value:"serial"},{text:"Estado",value:"state"},{text:"Creado",value:"createdAt",sortable:!1},{text:"Observaciones",value:"observations",sortable:!1},{text:"Opciones",value:"opciones",sortable:!1}],laptops:[]}},methods:{login(){this.$router.replace("/")},listarLaptops(){let t={headers:{"x-token":this.$store.state.token}};rt().get(`/api/laptop/holder/${this.$store.state.datos._id}`,t).then((t=>{console.log(t),this.laptops=t.data.laptop})).catch((t=>{console.log(t)}))},nuevoEquipo(){this.dialog=!0},cerrarDialog(){this.dialog=!1},registrar_laptop(){this.overlay=!0;let t={headers:{"x-token":this.$store.state.token}};rt().post("/api/laptop",{holder:this.$store.state.datos._id,serial:this.serial,observations:this.observaciones},t).then((t=>{console.log(t),lt().fire({position:"bottom-end",icon:"success",title:"Registro exitoso",showConfirmButton:!1,timer:2e3}),this.dialog=!1,this.limpiarCajas(),this.listarLaptops(),this.overlay=!1})).catch((t=>{console.log(t),lt().fire({title:"<strong>Error en registro</strong>",icon:"error",html:`<h4>${t.response.data.errors[0].msg}</h4>`,showCloseButton:!0}),this.overlay=!1}))},editar(t){console.log(t)},generarcodigo(t){let e={headers:{"x-token":this.$store.state.token}};console.log(e),this.dialog2=!0,rt().put(`/api/laptop/barcodehtml/${t._id}`,{},e).then((t=>{console.log(t),this.vector=t.data;let e=document.getElementById("s");e.innerHTML=this.vector})).catch((t=>{console.log(t)}))},habilitar(t){if(console.log(t.state),"1"===t.state){let e={headers:{"x-token":this.$store.state.token}};rt().put(`/api/laptop/unactivate/${t._id}`,{},e).then((t=>{console.log(t),this.listarLaptops()})).catch((t=>{console.log(t.response)}))}else{let e={headers:{"x-token":this.$store.state.token}};rt().put(`/api/laptop/activate/${t._id}`,{},e).then((t=>{console.log(t),this.listarLaptops()})).catch((t=>{console.log(t.response)}))}},limpiarCajas(){this.serial="",this.observaciones=""}},mounted(){this.listarLaptops()}},de=ce,ue=(0,m.Z)(de,le,ne,!1,null,null,null),he=ue.exports,me=function(){var t=this,e=t._self._c;return e(a.Z,{staticClass:"mt-16"},[""!==t.$store.state.token?[e(F.Z,{staticClass:"mt-5",attrs:{fluid:""}},[e(K.Z,[e(l.Z,{attrs:{cols:"6"}},[e(H.Z,{staticClass:"elevation-0"},[e("h2",[t._v("Registro de entradas y salidas")])])],1),e(l.Z,{attrs:{cols:"6"}},["ADMIN"===t.$store.state.datos.rol||"BIBLIOTECARIA"===t.$store.state.datos.rol||"GUARDA"===t.$store.state.datos.rol?e(H.Z,{staticClass:"elevation-0 d-flex justify-end"},[e(b.Z,{on:{click:function(e){return t.nuevoEquipo()}}},[t._v("Nuevo Registro")])],1):t._e()],1)],1)],1),e(Q.Z,{staticClass:"elevation-1 mt-5 mx-5",attrs:{headers:t.encabezados,items:t.entradas,"items-per-page":20},scopedSlots:t._u([{key:"item.opciones",fn:function({item:o}){return[e(pt.Z,{attrs:{top:""},scopedSlots:t._u(["No se ha devuelto el pc"===t.fechaSalida(o.checkout)&&"ADMIN"===t.$store.state.datos.rol||"BIBLIOTECA"===t.$store.state.datos.rol||"BIBLIOTECARIA"===t.$store.state.datos.rol||"PORTERIA"===t.$store.state.datos.rol||"GUARDA"===t.$store.state.datos.rol?{key:"activator",fn:function({on:s,attrs:a}){return[e(x.Z,t._g(t._b({staticClass:"mr-2",attrs:{color:"orange"},on:{click:function(e){return t.devolver(o)}}},"v-icon",a,!1),s),[t._v(" mdi-keyboard-return")])]}}:null],null,!0)},[e("span",[t._v("Retorno del pc")])])]}},{key:"item.entrytime",fn:function({item:o}){return[e("span",[t._v(t._s(t.fechaEntrada(o.entrytime)))])]}},{key:"item.checkout",fn:function({item:o}){return["No se ha devuelto el pc"===t.fechaSalida(o.checkout)?e("span",{staticClass:"red--text"},[t._v(t._s(t.fechaSalida(o.checkout)))]):e("span",{staticClass:"green--text"},[t._v(t._s(t.fechaSalida(o.checkout)))])]}}],null,!0)},[e("template",{slot:"no-data"},[e("div",[e("span",[t._v("No hay datos por mostrar")])])])],2)]:e(F.Z,[e(K.Z,[e(l.Z),e(l.Z,{staticClass:"d-flex justify-center"},[e(k.Z,{attrs:{src:o(6315),height:"250",width:"250"}})],1),e(l.Z)],1),e(K.Z,[e(l.Z,[e(ht.Z,{attrs:{outlined:"",text:"",type:"error"}},[e(K.Z,{attrs:{align:"center"}},[e(l.Z,{staticClass:"grow"},[t._v(" En el momento su sesion ha caducado ❗ Por favor inicie sesion para interactuar con los servicios de biblioteca ")]),e(l.Z,{staticClass:"shrink"},[e(b.Z,{attrs:{outlined:"",color:"red"},on:{click:function(e){return t.login()}}},[e(x.Z,{attrs:{left:""}},[t._v(" mdi-login ")]),t._v(" Login ")],1)],1)],1)],1)],1)],1)],1),e(W.Z,{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(H.Z,[e(V.EB,[e("span",{staticClass:"text-h5"},[t._v("Registrar nueva entrada")])]),e(V.ZB,[e(F.Z,[e(K.Z,[e(l.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(tt.Z,{attrs:{label:"Quien registra",type:"text",disabled:""},model:{value:t.$store.state.datos.name,callback:function(e){t.$set(t.$store.state.datos,"name",e)},expression:"$store.state.datos.name"}})],1),e(l.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(tt.Z,{attrs:{label:"Serial del pc",type:"text"},model:{value:t.serial,callback:function(e){t.serial=e},expression:"serial"}})],1)],1),e(K.Z,[e(l.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(tt.Z,{attrs:{label:"Documento del aprendiz",type:"text"},model:{value:t.documento,callback:function(e){t.documento=e},expression:"documento"}})],1)],1)],1)],1),e(V.h7,[e(A.Z),e(b.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.cerrarDialog()}}},[t._v(" Cerrar ")]),e(b.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.registrar_entrada()}}},[t._v(" Guardar ")])],1)],1)],1),e(Y.Z,{attrs:{value:t.overlay}},[e(J.Z,{attrs:{indeterminate:"",size:"64"}})],1)],2)},pe=[],ge={name:"PageRegistro",data(){return{overlay:!1,fecha:"",dialog:!1,serial:"",documento:"",lugar:"",entradas:[],span:!1,id_propietario:"",encabezados:[{text:"Rol",value:"holder.rol"},{text:"Persona encargada",align:"start",sortable:!1,value:"holder.name"},{text:"Serial PC",value:"laptop.serial"},{text:"Propietario",value:"laptop.holder.name"},{text:"Registro Inicial",value:"entrytime",sortable:!1},{text:"Aprendiz",value:"documentlearner.name",sortable:!1},{text:"Registro final",value:"checkout",sortable:!1},{text:"Opciones",value:"opciones",sortable:!1}]}},methods:{listarPrestamos(){let t={headers:{"x-token":this.$store.state.token}};rt().get(`/api/entry/date/pendientes/entrega/holder/${this.$store.state.datos._id}`,t).then((t=>{console.log(t),this.entradas=t.data.entry})).catch((t=>{console.log(t)}))},registrar_entrada(){console.log(this.$store.state.lugar);let t={headers:{"x-token":this.$store.state.token}};rt().post("/api/entry",{holder:this.$store.state.datos._id,laptop:this.serial,documentlearner:this.documento,checkout:"",place:this.$store.state.lugar},t).then((t=>{console.log(t),lt().fire({position:"bottom-end",icon:"success",title:"Registro exitoso",showConfirmButton:!1,timer:2e3}),this.listarPrestamos()})).catch((t=>{console.log(t),lt().fire({title:"<strong>Error en registro</strong>",icon:"error",html:`<h4>${t.response.data.errors[0].msg}</h4>`,showCloseButton:!0})}))},devolver(t){console.log(t);let e={headers:{"x-token":this.$store.state.token}};rt().put(`/api/entry/${t._id}`,{},e).then((t=>{console.log(t),this.listarPrestamos()})).catch((t=>{console.log(t)}))},login(){this.$router.replace("/")},nuevoEquipo(){this.dialog=!0},cerrarDialog(){this.dialog=!1},fechaEntrada(t){let e=new Date(t);return e.toLocaleDateString()+" - "+e.toLocaleTimeString()},fechaSalida(t){if(void 0===t||""===t)return this.span=!1,"No se ha devuelto el pc";{let e=new Date(t);return this.span=!0,e.toLocaleDateString()+" - "+e.toLocaleTimeString()}}},computed:{},created(){this.listarPrestamos()}},ve=ge,Ze=(0,m.Z)(ve,me,pe,!1,null,null,null),fe=Ze.exports,be=function(){var t=this,e=t._self._c;return e("div",[e(F.Z,{staticClass:"mt-16",attrs:{fluid:""}},[e(K.Z,[e(l.Z,{attrs:{cols:"12",md:"4"}}),e(l.Z,{attrs:{cols:"12",md:"4"}},[e(H.Z,[e(V.EB,{staticClass:"black white--text"},[e("span",[t._v("Cambio de contraseña")])]),e(V.ZB,[e(l.Z,{attrs:{cols:"12"}},[e(tt.Z,{staticClass:"input-group--focused",attrs:{"append-icon":t.show3?"mdi-eye":"mdi-eye-off",type:t.show3?"text":"password",name:"input-10-2",label:"Nueva contraseña"},on:{"click:append":function(e){t.show3=!t.show3}},model:{value:t.nueva1,callback:function(e){t.nueva1=e},expression:"nueva1"}})],1),e(l.Z,{attrs:{cols:"12"}},[e(tt.Z,{staticClass:"input-group--focused",attrs:{name:"input-10-2",label:"Confirmar la nueva contraseña"},model:{value:t.nueva2,callback:function(e){t.nueva2=e},expression:"nueva2"}})],1)],1),e(V.h7,[e(A.Z),e(b.Z,{staticClass:"orange",attrs:{dense:"",elevation:"2"},on:{click:function(e){return t.guardar()}}},[t._v("Guardar")])],1)],1)],1),e(l.Z,{attrs:{cols:"12",md:"4"}})],1)],1)],1)},xe=[],ke={name:"ResetearPassword",data(){return{show3:!1,nueva1:"",nueva2:""}},methods:{guardar(){const t=window.location.search;console.log(t);let e=new URLSearchParams(t),o=e.get("token"),s=e.get("id"),a={headers:{"x-token":o}};this.nueva1===this.nueva2?rt().post("/api/holder/passwordreset",{holderId:s,password:this.nueva2},a).then((t=>{console.log(t),lt().fire({position:"bottom-end",icon:"success",title:"Cambio de contraseña exitoso",showConfirmButton:!1,timer:2e3})})).catch((t=>{console.log(t),lt().fire({title:"<strong>Error en registro</strong>",icon:"error",html:`<h4>${t.response.data.errors[0].msg}</h4>`,showCloseButton:!0})})):(lt().fire({title:"<strong>Error en contraseña</strong>",icon:"error",html:"<h4>No coinciden las contraseñas</h4>",showCloseButton:!0}),this.nueva1="",this.nueva2="")}}},_e=ke,Ce=(0,m.Z)(_e,be,xe,!1,null,null,null),ye=Ce.exports;const $e=[{path:"/",component:Vt},{path:"/reset",component:ye},{path:"/miequipo",component:he},{path:"/inicio",component:ie},{path:"/perfil",component:Xt},{path:"/persona",component:ut},{path:"/equipo",name:"equipo",component:xt},{path:"/registro",component:It},{path:"/misregistros",component:Dt},{path:"/usuarioregistro",component:Nt},{path:"/pendientes",component:fe},{path:"/reset",component:ye}];var Ie=o(629);s["default"].use(Ie.ZP);const Ae=new Ie.ZP.Store({state:{token:"",datos:{},foto:"",lugar:""},mutations:{setToken(t,e){t.token=e},setDatos(t,e){t.datos=e},setFoto(t,e){t.foto=e},setLugar(t,e){t.lugar=e}},actions:{setToken(t,e){t.commit("setToken",e)},setDatos(t,e){t.commit("setDatos",e)},setFoto(t,e){t.commit("setFoto",e)},setLugar(t,e){t.commit("setLugar",e)}}});o(8556);s["default"].use(G.ZP),s["default"].use(U()),rt().defaults.baseURL="https://bibliotecacat-60d0e27daabb.herokuapp.com";const we=new G.ZP({routes:$e,mode:"hash"});s["default"].config.productionTip=!1,new s["default"]({vuetify:z,router:we,store:Ae,render:t=>t(N)}).$mount("#app"),we.beforeEach(((t,e,o)=>{Ae.state.token||"/"==t.path||"/reset"==t.path?o():o("/")}))},6315:function(t,e,o){t.exports=o.p+"img/good-night-sweet-dreams.df7e41a8.gif"}},e={};function o(s){var a=e[s];if(void 0!==a)return a.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,o),r.exports}o.m=t,function(){var t=[];o.O=function(e,s,a,r){if(!s){var i=1/0;for(d=0;d<t.length;d++){s=t[d][0],a=t[d][1],r=t[d][2];for(var l=!0,n=0;n<s.length;n++)(!1&r||i>=r)&&Object.keys(o.O).every((function(t){return o.O[t](s[n])}))?s.splice(n--,1):(l=!1,r<i&&(i=r));if(l){t.splice(d--,1);var c=a();void 0!==c&&(e=c)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[s,a,r]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){o.p="/"}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,s){var a,r,i=s[0],l=s[1],n=s[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(a in l)o.o(l,a)&&(o.m[a]=l[a]);if(n)var d=n(o)}for(e&&e(s);c<i.length;c++)r=i[c],o.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return o.O(d)},s=self["webpackChunkbiblioteca"]=self["webpackChunkbiblioteca"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=o.O(void 0,[998],(function(){return o(1574)}));s=o.O(s)})();
//# sourceMappingURL=app.b1750bd4.js.map